# scons build file for cmsg

Import('env', 'libInstallDir', 'incInstallDir', 'archIncInstallDir', 'debugSuffix')
import os
from os import sep

headerList = ['regex.h']
linkList   = [archIncInstallDir + sep + 'regex.h']
libFiles   = ['regcomp.c',
              'regerror.c',
              'regexec.c',
              'regfree.c']

env.AppendUnique(CPPPATH = ['.'])
regexpLib = env.SharedLibrary(target = 'cmsgRegex'+debugSuffix, source = libFiles)

env.Alias("install", env.Install(target = incInstallDir, source = headerList))
env.Alias("install", env.Install(target = libInstallDir, source = regexpLib))

# create symbolic links to installed header files
if archIncInstallDir != incInstallDir:
    env.Alias("install", env.CreateSymbolicLinks(target = linkList,
        source = env.Install(target = incInstallDir, source = headerList)))
