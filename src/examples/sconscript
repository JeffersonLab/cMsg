# try scons as build system for cmsg
Import('env', 'binDir', 'archDir', 'execLibs', 'doVX')


vxfileList = Glob('vx*', source=True, strings=True)
print 'vxfileList = ', vxfileList                
fileList = Glob('*.c', source=True, strings=True)
for vxname in vxfileList:
    for fname in fileList:
        if vxname == fname:
            fileList.remove(vxname)
            print "removing " + vxname + " from file list"
            break
print 'fileList = ', fileList                

# loop over files, creating executable of the same name
execList_c = ['']
for fileName in fileList:
    print "adding file ", fileName, " to list"
    execList_c.append(env.Program(source = fileName,
                              LIBS    = ['cmsg', 'cmsgRegex'] + execLibs,
                              LIBPATH = ['#src/regexp/'+archDir, '#src/libsrc/'+archDir],
                              CPPPATH = ['.', '#src/regexp', '#src/libsrc']))
installed = env.Install(target = binDir, source = execList_c)
env.Alias("install", installed)
print "Installed stuff = ", installed
#env.Install(dir = binDir, source = execList_c)

#execList_cc = ['']
#for fileName in ccfileList:
    #execList.append(env.Program(source = fileName,
                              #LIBS    = ['cmsg', 'cmsgRegex', 'cmsgxx'] + execLibs,
                              #LIBPATH = ['#src/regexp/'+archDir, '#src/libsrc/'+archDir],
                              #CPPPATH = ['.', '#src/regexp', '#src/libsrc']))

#Install(dir = binDir, source = execList_cc)
