# scons build file for cmsg
Import('env', 'libDir', 'incDir', 'tarfile')

fileList = ['cMsg.c',
            'cMsgCompoundPayload.c',
            'cMsgDomain.c',
            'cMsgDomainListenThread.c',
            'cMsgDomainUtil.c',
            'cMsgMatching.c',
            'cMsgNetwork.c',
            'encode.c',
            'fileDomain.c',
            'hash.c',
            'rcDomain.c',
            'rcDomainListenThread.c',
            'rwlock.c',
            'sunConcurrency.c']

env.AppendUnique(CPPPATH = ['.', '#src/regexp'])
cmsgLib = env.SharedLibrary(target = 'cmsg', source = fileList)
installedLib = env.Install(target = libDir, source = cmsgLib)
env.Alias("install", env.Install(target = incDir, source = 'cMsg.h'))
env.Alias("install", installedLib)
#env.Alias('uninstall', env.Command ([], [], [Delete (installedLib),
#                                             Delete (incDir+'/cMsg.h')]))
